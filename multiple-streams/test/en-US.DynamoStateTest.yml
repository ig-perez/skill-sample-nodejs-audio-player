#=====================================================================================================================
#     ______    _ ____  ______        __  _
#    / __/ /__ (_) / / /_  __/__ ___ / /_(_)__  ___ _
#   _\ \/  '_// / / /   / / / -_|_-</ __/ / _ \/ _ `/
#  /___/_/\_\/_/_/_/   /_/  \__/___/\__/_/_//_/\_, /
#                                             /___/
#
# Test type: Functional/End-to-End/Regression
# Skill name: "Audio Player Multiple Streams" by Amazon
# Test scope: LaunchRequest, AMAZON.PauseIntent, AMAZON.ResumeIntent, AMAZON.HelpIntent
#             AMAZON.CancelIntent, AMAZON.StopIntent, AMAZON.StartOverIntent
#=====================================================================================================================

---
configuration:
  locale: en-US
  dynamo: mock
  userId: amzn1.ask.account.123456

---
- test: "Sequence 01. Test scenario: launch request and start playing audio."
- LaunchRequest:
  - response.outputSpeech.ssml: "Welcome to the AWS Podcast. you can ask to play the audio to begin the podcast."
- "begin podcast":
  - response.outputSpeech.ssml: "This is Episode 139"
  - response.directives[0].type: "AudioPlayer.Play" # this is equivalent to $..type JSONPath
  - $..playBehavior: "REPLACE_ALL"
  - $..audioItem.stream.url: "https://feeds.soundcloud.com/stream/274166909-amazon-web-services-306355661-aws-podcast-episode-139.mp3"
  - response.shouldEndSession: "true"
- stop:
  - response.outputSpeech.ssml: "Goodbye!"

---
- test: "Sequence 02. Test scenario: Persistence with DynamoDB, start audio."
- LaunchRequest:
  - response.outputSpeech.ssml: "/you were listening episode 139 do you want to resume.*/i"
  - response.reprompt.outputSpeech.ssml: "You can say yes to resume or no to play from the top."
- yes:
  - response.outputSpeech.ssml: "This is Episode 139"
- stop:
  - response.outputSpeech.ssml: "Goodbye!"

---
- test: "Sequence 03. Test scenario: Persistence with DynamoDB, resume, next and previous."
- resume:
  - response.outputSpeech.ssml: "This is Episode 139"
- next:
  - response.outputSpeech.ssml: "This is Episode 140"
- stop:
  - response.outputSpeech.ssml: "Goodbye!"
- resume:
  - response.outputSpeech.ssml: "This is Episode 140"
- previous:
  - response.outputSpeech.ssml: "This is Episode 139"
- cancel:
  - response.outputSpeech.ssml: "Goodbye!"